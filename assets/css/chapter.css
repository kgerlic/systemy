/* =========================================================
   chapter.css — style stron rozdziałów e-skryptu
   Mobile-first, czytelność, elementy: definicje, ryciny,
   listy, bloki "Uwaga", sekcje, tabela porównawcza, pytania.
   Wspiera light (default) + dark (html[data-theme="dark"]).
   ========================================================= */

/* ========== Local tokens (derive from main.css) ========== */
:root{
  --content-max: 900px;

  --reading: 1.02rem;
  --reading-lg: 1.06rem;

  --lh: 1.65;
  --lh-tight: 1.35;

  /* UWAGA: poprawione — bazujemy na --accent z main.css */
  --accent: color-mix(in srgb, var(--accent) 86%, #000 14%);
  --accent-soft: color-mix(in srgb, var(--accent) 16%, transparent);

  --callout-bg: color-mix(in srgb, var(--surface2) 75%, transparent);
  --callout-border: color-mix(in srgb, var(--border) 90%, transparent);

  --code-bg: color-mix(in srgb, var(--surface2) 85%, transparent);

  /* typographic rhythm */
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 26px;
  --space-6: 34px;
}

/* ========== Dark overrides (czarne wyróżnienia) ========== */
html[data-theme="dark"]{
  --accent: color-mix(in srgb, var(--accent) 92%, #fff 8%);
  --accent-soft: color-mix(in srgb, var(--accent) 22%, transparent);

  /* callout jako czarna karta */
  --callout-bg: var(--surface);
  --callout-border: color-mix(in srgb, var(--border) 92%, transparent);

  /* kod minimalnie jaśniejszy */
  --code-bg: var(--surface2);
}

/* ========== Page frame ========== */
.chapter{
  width: min(var(--content-max), 100% - 2*var(--pad));
  margin: 0 auto;
  padding: var(--space-4) 0 var(--space-6);
}

/* Typografia */
.chapter p,
.chapter li{
  font-size: var(--reading);
  line-height: var(--lh);
  color: var(--text);
}

@media (min-width: 920px){
  .chapter p,
  .chapter li{
    font-size: var(--reading-lg);
  }
}

/* ========== Breadcrumb ========== */
.breadcrumb{
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items:center;
  color: var(--muted);
  font-size: .92rem;
}
.breadcrumb a{
  color: var(--muted);
  text-decoration: none;
}
.breadcrumb a:hover{
  text-decoration: underline;
}
.breadcrumb .sep{
  color: var(--muted2);
}

/* ========== Navigation pills ========== */
.chapter-actions{
  display:flex;
  gap: 8px;
  align-items:center;
}

.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height: 40px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  text-decoration: none;
  font-size: .92rem;
  box-shadow: 0 4px 14px rgba(18,19,24,.06);
}
.pill:hover{
  background: var(--surface2);
  text-decoration:none;
}

/* Dark: sensowny cień */
html[data-theme="dark"] .pill{
  box-shadow: var(--shadow2);
}

/* ========== Headings ========== */
.chapter h1{
  margin: 0 0 var(--space-3);
  font-size: 1.55rem;
  line-height: var(--lh-tight);
  letter-spacing: .2px;
  color: var(--text);
}

.lead{
  margin: 0 0 var(--space-4);
  color: var(--muted);
  font-size: 1.02rem;
  line-height: 1.6;
}

.chapter h2{
  margin: var(--space-6) 0 var(--space-2);
  font-size: 1.18rem;
  line-height: var(--lh-tight);
  color: var(--text);
  letter-spacing: .2px;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}

.chapter h3{
  margin: var(--space-5) 0 var(--space-2);
  font-size: 1.05rem;
  line-height: var(--lh-tight);
  color: var(--text);
}

.chapter h4{
  margin: var(--space-4) 0 var(--space-2);
  font-size: .98rem;
  line-height: var(--lh-tight);
  color: var(--text);
}

.section-no{
  color: var(--muted2);
  font-weight: 650;
  margin-right: 8px;
}

/* ========== Paragraph rhythm ========== */
.chapter p{
  margin: 0 0 var(--space-3);
}
.chapter p + p{
  margin-top: 0;
}

/* ========== Lists ========== */
.chapter ul,
.chapter ol{
  margin: 0 0 var(--space-3);
  padding-left: 1.2rem;
}
.chapter li{
  margin: 0 0 var(--space-1);
}
.chapter ul li::marker,
.chapter ol li::marker{
  color: var(--muted2);
}

.spec-list{
  margin: var(--space-2) 0 var(--space-4);
  padding-left: 1.1rem;
}
.spec-list li{
  margin: 0 0 6px;
}

/* ========== Inline emphasis ========== */
.chapter em{ font-style: italic; }
.chapter strong{ font-weight: 750; }

.term{
  color: var(--muted);
  font-size: .96em;
}

/* ========== Callouts ========== */
.callout{
  margin: var(--space-4) 0;
  padding: 14px;
  border-radius: var(--radius2);
  background: var(--callout-bg);
  border: 1px solid var(--callout-border);
  box-shadow: 0 6px 18px rgba(18,19,24,.06);
}

.callout-title{
  margin: 0 0 8px;
  font-weight: 800;
  font-size: .96rem;
  color: var(--text);
  letter-spacing: .2px;
}

.callout p:last-child{ margin-bottom: 0; }

.callout.note{ border-left: 6px solid var(--accent); }
.callout.warn{ border-left: 6px solid #ff7a00; }
.callout.def{ border-left: 6px solid #2aa36b; }

/* Dark: cień jak karty */
html[data-theme="dark"] .callout{
  box-shadow: var(--shadow2);
}

/* ========== Figures ========== */
figure.ill{
  margin: var(--space-4) 0;
  padding: 12px;
  background: var(--figure-bg);
  border: 1px solid var(--figure-border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
}

figure.ill img{
  display:block;
  max-width: 60%;
  height:auto;
  margin: 0 auto;
}

figure.ill.small  { max-width: 320px; }
figure.ill.medium { max-width: 420px; }
figure.ill.large  { max-width: 600px; }


figure.ill figcaption{
  margin-top: 10px;
  color: rgba(18,19,24,.78);
  font-size: .92rem;
  line-height: 1.45;
}

/* Dark: podpis nadal na białej karcie */
html[data-theme="dark"] figure.ill figcaption{
  color: rgba(18,19,24,.80);
}

/* Numeracja ilustracji — zawsze czarna (czytelna na jasnym tle karty) */
.fig-ref{
  color: #000;
  font-weight: 650;
}

/* ========== Tables ========== */
.table-wrap{
  margin: var(--space-4) 0;
  border-radius: var(--radius2);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow);
  overflow: hidden;
}

/* Dark: tabele jako jasna karta (spójnie z main.css) */
html[data-theme="dark"] .table-wrap{
  background: var(--table-bg);
  border-color: var(--table-border);
}
